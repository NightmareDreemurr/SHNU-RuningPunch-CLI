## 更新日志

### 2025.03.09 更新
1. 改进了证书生成和安装流程，现在可以自动验证证书是否正确安装
2. 添加了日志记录功能，问题排查更加方便
3. 证书路径更新为标准路径，提高兼容性
4. 增加了证书格式转换功能，支持 pem 格式
5. 添加了自动检测和安装 mitmproxy 的功能
6. 修复了中文引号导致的语法错误
7. 修复了 mitmproxy 安装成功但无法在路径中找到的问题，使用模块方式直接运行 mitmproxy
8. 新增多用户管理功能，支持同时存储多个用户的信息并在运行时选择
9. 修复了获取用户ID后程序闪退的问题
10. 改进了用户ID获取流程的稳定性，增加了超时处理和错误捕获
11. 新增快速完成功能，用户可选择跳过等待时间直接上报完成（存在被系统检测的风险）

## 功能特点

1. 自动获取用户ID并存储
2. 多用户管理，可以为多个用户打卡
3. 自动模拟跑步路线和位置点上报
4. 自动安装和管理证书
5. 支持自定义跑步时间和距离
6. 详细的日志记录，便于故障排查
7. 支持模拟真实跑步或快速完成模式

## 故障排查

如果遇到问题，可以查看 `shnuruning.log` 日志文件，其中包含详细的运行信息和错误报告。

证书安装失败的常见原因：
1. 缺少管理员权限 - 尝试以管理员身份运行程序
2. OpenSSL 未安装 - 需要安装 OpenSSL
3. 之前的 mitmproxy 进程未正确关闭 - 重启计算机后重试
4. mitmproxy 未正确安装 - 程序将尝试自动安装，或者可以手动执行 `pip install mitmproxy`
5. ~~安装后 mitmproxy 不在系统路径中 - 重启计算机后再试~~ (已解决，现在使用模块直接导入)

如果遇到 "The system cannot find the file specified" 错误，通常是因为 mitmproxy 未安装或不在系统路径中，请尝试以下步骤：
1. 确保程序使用的是最新版本，已修复此问题
2. 如果问题仍然存在，尝试手动安装 mitmproxy: `pip install mitmproxy`

## 多用户管理

程序现在支持同时为多个用户存储信息和打卡：

1. 每次获取用户ID时，新用户会被添加到用户列表中，而不会覆盖现有用户
2. 如果获取到的用户ID已存在，会更新该用户的信息
3. 运行跑步功能时，如果有多个用户，会显示用户选择界面
4. 选择用户后，可以使用该用户的信息进行跑步打卡

## 跑步模式

程序提供两种跑步模式：

1. **模拟真实跑步**：等待设定的时间后才上报跑步完成结果，更接近真实跑步体验
2. **快速完成**：立即上报跑步完成结果，无需等待，但可能被后台系统检测到异常

⚠️ **风险警告**：使用快速完成模式可能会被后台系统识别为异常行为，导致跑步记录被清除或账号被标记。请自行承担使用风险。

已知问题与解决方案：
1. 中文引号导致的语法错误 - 已修复，如果仍遇到相关问题请提交反馈
2. mitmproxy 安装成功但无法在路径中找到 - 已修复，现在使用 Python 模块方式直接调用 mitmproxy
3. 获取用户ID后程序闪退 - 已修复，优化了进程管理逻辑，防止重复关闭同一进程
4. 用户ID获取超时 - 已添加60秒超时处理，超时后可选择重试或返回 
